
<html >
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <script>
  var preloadStatusInfo = "";
  // 方式1： 通过window.preloadStatus接口主动获取当前预渲染状态
  document.documentElement.id = window.preloadStatus;
  
  // 方式2： 通过事件监听方式，来被动收取内核中预渲染状态变化后的回调
  window.addEventListener('preloadstatuschanged', function (evt) {
    console.log("preloadstatuschanged:"+evt.preloadStatus)
    preloadStatusInfo += (evt.preloadStatus + " <br/> ");
    if (evt.preloadStatus === 'non-preload') { // 1. non-preload: 页面正常加载，非预渲染
      //document.documentElement.className = "non-preload"
      } else if (evt.preloadStatus === 'preload-start') { // 2. preload-start: 预渲染开始发起
      //document.documentElement.className = ""
      } else if (evt.preloadStatus === 'preload-end') { // 3. preload-end： 预渲染结束
      //document.documentElement.className = ""
      } else if (evt.preloadStatus === 'preload-matched') { // 4. preload-matched：命中预渲染页面
      document.body.innerHTML += preloadStatusInfo;
      }
  });
  </script>
  
  
  </head>
  
  
  <body>
  Hello World!
  <br/>
  Status:
  <br/>
  
  <script>
     if (window.preloadStatus == "non-preload") {
      document.body.innerHTML += preloadStatusInfo;
     }
     
     if (window.preloadStatus == null) {
      document.body.innerHTML += window.preloadStatus;
     }
  </script>
  
  </body>
  
  
  
  </html>
    
  
   