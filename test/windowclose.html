
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,shrink-to-fit=no">
    <title></title>
</head>
<body>

</br>
<h2>window open and close</h2>
<button onclick="exec()">click</button>
</br>
<button onclick="setflag()">setFlag</button>

<script type="text/javascript">  
var flag = true;
function exec(){  
  var opened = window.open('https://www.qq.com/404/', '_self');
  if (flag) {
    opened.opener = null;
    opened.close();
  }
}
function setflag() {
  flag = false;
}   
</script>  
</body>
</html>

